<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preven√ß√£o do Golpe do PIX no WhatsApp - Projeto de Extens√£o Comunit√°ria de Augusto Queiroz e UNICV</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="config.js" defer></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F4F4F4;
        }

        .container-grafico {
            position: relative;
            width: 100%;
            max-width: 400px;
            height: 300px;
            max-height: 350px;
            margin: 20px auto;
        }

        .container-grafico-barra {
            position: relative;
            width: 100%;
            height: 350px;
            max-height: 400px;
            margin: 20px auto;
        }

        .passo {
            display: none;
        }

        .passo.active {
            display: block;
        }

        .carregador {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #004AAD;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: none;
            /* Come√ßa escondido */
            justify-content: center;
            align-items: center;
            z-index: 1000;
            cursor: pointer;
        }

        .modal-imagem {
            max-width: 90%;
            max-height: 90vh;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            cursor: default;
        }
    </style>
</head>

<body class="text-gray-800">

    <header class="bg-[#25D366] shadow-md sticky top-0 z-10">
        <div class="container mx-auto max-w-6xl p-6 flex flex-col md:flex-row justify-between items-center">
            <div class="flex items-center">
                <span class="text-3xl mr-3">üí¨üîí</span>
                <div>
                    <h1 class="text-3xl font-bold text-white text-center">Capacita√ß√£o em Seguran√ßa Digital no WhatsApp
                    </h1>
                    <p class="text-1g text-black text-center">Um guia educativo sobre o golpe do PIX | Projeto de
                        Extens√£o Comunit√°ria UNICV</p>
                </div>
            </div>
            <div class="text-right mt-4 md:mt-0">
                <div class="bg-white rounded-lg p-2 shadow-sm"><a href="https://unicv.edu.br/extensao-universitaria/"
                        target="_blank" rel="noopener noreferrer">
                        <img src="https://unicv.edu.br/wp-content/uploads/2020/12/logo-verde-280X100.png"
                            alt="Logo UNICV" class="h-12 md:h-16 inline-block"
                            onerror="this.alt='Logo UNICV'; this.src='https://placehold.co/200x60/FFFFFF/000000?text=UNICV';">
                    </a>
                </div>
                <p class="text-sm text-black mt-2">Autor do Projeto: Augusto Queiroz</p>
            </div>
        </div>
    </header>

    <main class="container mx-auto max-w-6xl p-4 md:p-8 mt-8">

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">

            <!-- Coluna Principal -->
            <div class="md:col-span-2 space-y-8">

                <!-- Se√ß√£o: O Problema -->
                <section class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-2xl font-bold text-[#004AAD] mb-4">O Problema: O golpe no WhatsApp do "n√∫mero novo"
                    </h2>
                    <p class="text-gray-700 mb-4">
                        O golpe do "falso parente" (ou "n√∫mero novo") √© uma das fraudes mais comuns e eficazes no
                        Brasil. Criminosos usam engenharia social para se passar por um filho, filha ou outro parente em
                        apuros ou em situa√ß√£o emergenciais, solicitando transfer√™ncias urgentes via PIX.
                    </p>
                    <p class="text-gray-700">
                        A urg√™ncia e o apelo emocional s√£o as principais armas do golpista. Eles contam com a confian√ßa
                        e o desejo da v√≠tima de ajudar um ente querido, explorando a falta de verifica√ß√£o de seguran√ßa.
                    </p>
                </section>

                <!-- Se√ß√£o: Dados (Gr√°fico) -->
                <section class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-2xl font-bold text-[#004AAD] mb-4">Dados da pesquisa: O alvo principal </h2>
                    <p class="text-gray-700 mb-4">
                        Embora qualquer pessoa possa cair, pesquisas indicam que o p√∫blico 60+ √© desproporcionalmente
                        afetado. A menor familiaridade com a verifica√ß√£o em duas etapas e a maior confian√ßa nas rela√ß√µes
                        familiares s√£o fatores explorados pelos criminosos.
                    </p>
                    <div class="container-grafico-barra">
                        <canvas id="graficoVitimasGolpe"></canvas>
                    </div>
                    <p class="text-sm text-center text-gray-500 mt-2">Dados baseados na pesquisa feita e em tend√™ncias
                        de seguran√ßa p√∫blica.</p>
                </section>

                <!-- Se√ß√£o: Relatos -->
                <section class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-2xl font-bold text-[#004AAD] mb-4">Relatos reais (anonimizados)</h2>
                    <div class="space-y-4">
                        <blockquote class="border-l-4 border-yellow-500 p-4 bg-yellow-50 rounded-r-lg">
                            <p class="italic text-gray-700">"Meu maior medo era cair nesses golpes. Um dia, recebi uma
                                mensagem do meu 'filho', com a foto dele, pedindo um PIX urgente. Fiquei nervoso, quase
                                fiz. Minha sorte foi que minha neta estava do meu lado e me ensinou a ligar para o
                                n√∫mero antigo. Era golpe. Foi a partir desse susto que decidi que precisava aprender a
                                me proteger."</p>
                            <cite class="block text-right text-gray-600 mt-2">- J.C.R., 65 anos (Relato-base do
                                projeto)</cite>
                        </blockquote>
                        <div class="space-y-4">
                            <blockquote class="border-l-4 border-[#009FFD] p-4 bg-gray-50 rounded-r-lg">
                                <p class="italic text-gray-700">"Recebi uma mensagem do 'meu filho' dizendo que tinha
                                    trocado de n√∫mero e precisava pagar um boleto urgente. A foto era dele. S√≥ depois
                                    que
                                    fiz o PIX, liguei para o n√∫mero antigo e descobri que era golpe. Perdi R$ 1.200."
                                </p>
                                <cite class="block text-right text-gray-600 mt-2">- M.A., 67 anos</cite>
                            </blockquote>
                            <blockquote class="border-l-4 border-[#009FFD] p-4 bg-gray-50 rounded-r-lg">
                                <p class="italic text-gray-700">"Quase ca√≠. A 'minha filha' pediu dinheiro para a
                                    faculdade.
                                    Desconfiei porque ela nunca pede assim. Liguei para ela no n√∫mero de sempre e ela
                                    atendeu, sem saber de nada. O golpista tinha pego a foto dela no perfil."</p>
                                <cite class="block text-right text-gray-600 mt-2">- J.S., 62 anos</cite>
                            </blockquote>
                        </div>
                </section>

            </div>

            <!-- Coluna Lateral -->
            <div class="space-y-8">

                <!-- Se√ß√£o: Perfil da V√≠tima (Gr√°fico) -->
                <section class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-2xl font-bold text-[#004AAD] mb-4">Fatores de risco</h2>
                    <p class="text-gray-700 mb-4">
                        O sucesso do golpe se baseia em uma combina√ß√£o de fatores t√©cnicos e psicol√≥gicos. Abaixo est√£o
                        alguns fatores nos quais os golpistas se baiseiam para aumentar suas chances de sucesso:
                    </p>
                    <div class="container-grafico">
                        <canvas id="graficoFatoresRisco"></canvas>
                    </div>
                </section>

                <!-- Se√ß√£o: Solu√ß√£o (Seu Projeto) -->
                <section class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-2xl font-bold text-[#004AAD] mb-4">A solu√ß√£o: Capacita√ß√£o focada</h2>
                    <p class="text-gray-700 mb-4">
                        Baseado no diagn√≥stico da problem√°tica e em uma pesquisa na internet aprofundada sobre o tema, a
                        solu√ß√£o mais eficaz √© uma capacita√ß√£o visual e direta,
                        focada em criar uma "pausa para verifica√ß√£o".
                    </p>
                    <div class="border-2 border-[#004AAD] rounded-lg p-4 bg-blue-50">
                        <h3 class="font-bold text-lg text-center text-[red]">PIX urgente? Calma!</h3>
                        <p class="text-center text-black mt-2">√â seu filho mesmo ou √© o 'Golpe do n√∫mero novo'?</p>
                    </div>
                </section>

                <!-- IN√çCIO DA SE√á√ÉO INFOGR√ÅFICO -->
                <section class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-2xl font-bold text-[#004AAD] mb-4">Infogr√°fico Resumo</h2>
                    <p class="text-gray-700 mb-4">
                        Este infogr√°fico foi a primeira etapa da solu√ß√£o: um guia visual e objetivo com os 5 passos de
                        seguran√ßa, ideal para compartilhar rapidamente com a comunidade.
                    </p>
                    <div>
                        <!-- Imagem clic√°vel -->
                        <img id="img-infografico-resumo"
                            src="https://raw.githubusercontent.com/AugustoQueiroz13/SegurancaDigitalnoWhatsApp/refs/heads/master/img/infografico_seguranca_whatsapp_unicv_augusto_queiroz.jpg"
                            alt="Infogr√°fico Resumo dos 5 Passos de Seguran√ßa - Clique para ampliar"
                            class="w-full rounded-lg shadow-md border cursor-pointer transition-transform duration-200 hover:scale-[1.02]"
                            onerror="this.alt='Infogr√°fico Resumo'; this.src='https://placehold.co/600x800/E0E0E0/000000?text=Infografico+Resumo';">
                    </div>
                </section>
                <!-- FIM DA SE√á√ÉO INFOGR√ÅFICO -->


            </div>

        </div>

        <!-- Se√ß√£o: Guia de 5 Passos (Infogr√°fico Principal) -->
        <section class="md:col-span-3 bg-[#004AAD] rounded-lg shadow-md p-6 mt-8">
            <h2 class="text-2xl font-bold text-center text-white mb-6">Como se proteger: O guia de 5 passos</h2>
            <div id="guia-interativo" class="relative">

                <div class="flex flex-col md:flex-row justify-between items-center p-4 rounded-lg bg-gray-100">
                    <button id="passo-anterior"
                        class="bg-[#004AAD] text-white font-bold py-2 px-6 rounded-lg shadow hover:bg-[#003B8A] transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed mb-2 md:mb-0">Anterior</button>
                    <div id="titulo-passo" class="text-xl font-bold text-[#004AAD] text-center">Passo 1: O Alerta</div>
                    <button id="proximo-passo"
                        class="bg-[#004AAD] text-white font-bold py-2 px-6 rounded-lg shadow hover:bg-[#003B8A] transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed mt-2 md:mt-0">Pr√≥ximo</button>
                </div>

                <div class="mt-6 p-6 border rounded-lg bg-gray-50 min-h-[300px]">

                    <!-- Passo 1: Alerta -->
                    <div id="passo-1" class="passo active space-y-4">
                        <h3 class="text-3xl font-bold text-red-600 text-center">üö® PASSO 1: O ALERTA</h3>
                        <p class="text-lg text-center text-gray-700">"Oi pai/m√£e, troquei de n√∫mero. Salva a√≠."</p>
                        <p class="text-gray-700 text-base">
                            Toda mensagem de um n√∫mero desconhecido, mesmo com a foto de um familiar, √© um sinal de
                            alerta. Golpistas pegam fotos de perfis p√∫blicos. A hist√≥ria √© sempre parecida: o celular
                            quebrou, foi roubado, ou est√° "s√≥ com WhatsApp".
                        </p>
                        <div class="text-center">
                            <span class="text-6xl">‚ö†Ô∏è</span>
                        </div>
                    </div>

                    <!-- Passo 2: Press√£o -->
                    <div id="passo-2" class="passo space-y-4">
                        <h3 class="text-3xl font-bold text-red-600 text-center">üèÉ‚Äç‚ôÇÔ∏è PASSO 2: A PRESS√ÉO</h3>
                        <p class="text-lg text-center text-gray-700">"Preciso pagar um boleto/conta AGORA. Me ajuda com
                            um PIX? Te devolvo amanh√£."</p>
                        <p class="text-gray-700 text-base">
                            O golpista NUNCA vai pedir para voc√™ ligar. Ele vai criar um senso de urg√™ncia extrema: o
                            banco vai fechar, a conta vai vencer, ou est√° no meio de uma emerg√™ncia. Eles querem que
                            voc√™ aja por impulso, sem pensar.
                        </p>
                        <div class="text-center">
                            <span class="text-6xl">‚è∞</span>
                        </div>
                    </div>

                    <!-- Passo 3: Pausa -->
                    <div id="passo-3" class="passo space-y-4">
                        <h3 class="text-3xl font-bold text-yellow-600 text-center">‚è∏Ô∏è PASSO 3: A PAUSA</h3>
                        <p class="text-lg text-center text-gray-700">"Calma. Deixa eu ver isso."</p>
                        <p class="text-gray-700 text-base">
                            Este √© o passo mais importante. Respire fundo e N√ÉO FA√áA O PIX. Mesmo que a situa√ß√£o pare√ßa
                            desesperadora, um minuto de pausa n√£o vai piorar uma emerg√™ncia real, mas vai impedir um
                            golpe. Desconfie de toda e qualquer urg√™ncia.
                        </p>
                        <div class="text-center">
                            <span class="text-6xl">‚úã</span>
                        </div>
                    </div>

                    <!-- Passo 4: Verifica√ß√£o -->
                    <div id="passo-4" class="passo space-y-4">
                        <h3 class="text-3xl font-bold text-blue-600 text-center">üìû PASSO 4: A VERIFICA√á√ÉO</h3>
                        <p class="text-lg text-center text-gray-700">"Filho, estou te ligando no seu n√∫mero antigo."</p>
                        <p class="text-gray-700 text-base">
                            Saia do WhatsApp. Pegue seu telefone e LIGUE (uma chamada de voz normal) para o n√∫mero
                            ANTIGO e CONHECIDO do seu familiar. Em 99% dos casos, ele vai atender e confirmar que n√£o
                            trocou de n√∫mero.
                        </p>
                        <p class="text-gray-700 text-base font-semibold">
                            Nunca confie apenas em mensagens. Se n√£o conseguir ligar, fa√ßa uma pergunta que s√≥ o seu
                            familiar saberia responder (ex: "Qual o nome do nosso primeiro cachorro?").
                        </p>
                        <div class="text-center">
                            <span class="text-6xl">üìû</span>
                        </div>
                    </div>

                    <!-- Passo 5: Decis√£o -->
                    <div id="passo-5" class="passo space-y-4">
                        <h3 class="text-3xl font-bold text-green-600 text-center">‚úÖ PASSO 5: A DECIS√ÉO SEGURA</h3>
                        <p class="text-lg text-center text-gray-700">"N√£o vou fazer o PIX. Isso √© um golpe."</p>
                        <p class="text-gray-700 text-base">
                            Ap√≥s a verifica√ß√£o, voc√™ ter√° a certeza. A decis√£o correta √©: <strong>N√ÉO
                                TRANSFERIR</strong>, bloquear o n√∫mero do golpista imediatamente e avisar seus
                            familiares sobre a tentativa de golpe. Voc√™ tamb√©m pode tirar prints da tela onde o golpista
                            de envia as mensagens e informa√ß√µes solicitando o PIX para reportar √†s autoridades, se
                            necess√°rio, abra um boletim de ocorr√™ncia na pol√≠cia.
                        </p>
                        <div class="text-center">
                            <span class="text-6xl">üõ°Ô∏è</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- NOVA SE√á√ÉO: ANALISADOR DE MENSAGEM COM IA -->
        <section class="md:col-span-3 bg-white rounded-lg shadow-md p-6 mt-8">
            <h2 class="text-2xl font-bold text-center text-[#004AAD] mb-6">Recebeu uma mensagem suspeita?</h2>
            <p class="text-center text-gray-700 mb-6"><strong>Com o auxilio da IA
                    (Gemini) o texto ser√° analisado para te dizer o n√≠vel de risco de ser um golpe.<br><br> COLE A
                    MENSAGEM RECEBIDA AQUI:</strong></p>

            <div class="w-full max-w-2xl mx-auto">
                <textarea id="campo-mensagem"
                    class="w-full h-40 p-4 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#004AAD]"
                    placeholder="Ex: Oi m√£e, troquei de n√∫mero. Meu celular quebrou, preciso pagar uma conta urgente. Me faz um PIX de R$ 850?"></textarea>

                <button id="botao-analisar"
                    class="w-full bg-[#004AAD] text-white font-bold py-3 px-6 rounded-lg shadow hover:bg-[#003B8A] transition duration-200 mt-4">
                    Analisar Mensagem
                </button>

                <div id="carregador" class="carregador"></div>

                <div id="resultado-analise" class="mt-6 p-4 border rounded-lg bg-gray-50 hidden">
                    <h3 id="titulo-resultado" class="text-xl font-bold mb-2"></h3>
                    <p id="explicacao-resultado" class="text-gray-700"></p>
                </div>
            </div>
        </section>
        <!-- FIM DA NOVA SE√á√ÉO -->

        <!-- Se√ß√£o: Preven√ß√£o e Projeto -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-8">

            <section class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-2xl font-bold text-[#004AAD] mb-4">A√ß√µes de preven√ß√£o e dicas de ouro:</h2>
                <ul class="list-disc list-inside space-y-3 text-gray-700">
                    <li>
                        <strong>Ative a "Verifica√ß√£o em Duas Etapas"</strong> no seu WhatsApp. Isso impede que clonem
                        sua conta. (Configura√ß√µes > Conta > Verifica√ß√£o em duas etapas).
                    </li>
                    <li>
                        <strong>Desconfie de Urg√™ncia:</strong> Golpistas sempre t√™m pressa. Bancos e familiares reais
                        n√£o costumam agir assim.
                    </li>
                    <li>
                        <strong>LIGUE Sempre:</strong> A voz √© a melhor verifica√ß√£o. Nunca fa√ßa PIX para um "parente"
                        sem antes falar com ele por voz no n√∫mero antigo.
                    </li>
                    <li>
                        <strong>Ajuste sua Privacidade:</strong> No WhatsApp, mude quem pode ver sua foto de perfil para
                        "Apenas Meus Contatos". (Configura√ß√µes > Privacidade > Foto do Perfil).
                    </li>
                </ul>

                <!-- IN√çCIO DA ADI√á√ÉO: PLAYER DE PODCAST -->
                <div class="mt-6 border-t pt-6">
                    <h2 class="text-lg font-semibold text-[red] mb-3 text-center">Ou√ßa o Podcast sobre este Projeto de
                        Extens√£o:
                    </h2>
                    <audio controls class="w-full">
                        <source
                            src="https://augustoqueiroz13.github.io/SegurancaDigitalnoWhatsApp/audio/podcast-golpe-pix.mp3"
                            type="audio/mpeg">
                        Seu navegador n√£o suporta o elemento de √°udio.
                    </audio>
                </div>
                <!-- FIM DA ADI√á√ÉO -->

            </section>

            <section class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-2xl font-bold text-[#004AAD] mb-4">Sobre este Projeto de Extens√£o</h2>
                <div class="text-gray-700 space-y-4">
                    <p>Este trabalho √© parte de um projeto de extens√£o comunit√°ria focado na capacita√ß√£o em seguran√ßa
                        digital,
                        nascido de um diagn√≥stico com usu√°rios vulner√°veis.</p>
                    <p><strong>Problem√°tica:</strong> A car√™ncia de conhecimentos b√°sicos em seguran√ßa digital tornam os
                        usu√°rios, principalmente idosos, vulner√°veis a fraudes no WhatsApp, gerando inseguran√ßa e medo
                        no uso de ferramentas
                        essenciais de comunica√ß√£o.</p>
                    <p><strong>Solu√ß√£o:</strong> Uma capacita√ß√£o focada e visual, que evoluiu de uma arte gr√°fica de um
                        infogr√°fico est√°tico
                        para uma p√°gina web interativa (prot√≥tipo funcional), sugerindo o aprendizado sequencial dos 5
                        passos de seguran√ßa.</p>
                    <div class="mt-6 border-t pt-4">
                        <p class="font-bold">Autor do projeto, pesquisa, arte final, design e desenvolvimento web:
                            Carlos Augusto
                            Muniz de Queiroz</p>
                        <p class="text-sm">Grad. em An√°lise e Desenvolvimento de Sistemas</p>
                        <p class="font-bold mt-2">Parceria: UNICV - Centro Universit√°rio Cidade Verde - Maring√°/PR</p>
                    </div>

                    <!-- IN√çCIO DA ADI√á√ÉO: BOT√ÉO DE DOWNLOAD -->
                    <div class="mt-6 border-t pt-6">
                        <a href="https://drive.google.com/file/d/1pIpjSCdmip6vPcV3FCmCZcvm-gjXxQ6o/view?usp=sharing"
                            download
                            class="inline-block w-full text-center bg-[#004AAD] text-white font-bold py-3 px-6 rounded-lg shadow hover:bg-[#003B8A] transition duration-200">
                            Baixar o Artigo com a Pesquisa Completa (PDF)
                        </a>
                    </div>
                    <!-- FIM DA ADI√á√ÉO -->

                </div>
            </section>

        </div>

    </main>

    <footer class="bg-[#242424] text-gray-400 p-8 mt-10">
        <div class="container mx-auto max-w-6xl text-center">
            <p>&copy; 2025 - Augusto Queiroz & UNICV - Projeto de Extens√£o Comunit√°ria.<br>QUEIROZ, CARLOS AUGUSTO M.,
                QUEIROZ, C. AUGUSTO M.</p>
            <p class="text-sm mt-2">Este √© um material educativo e n√£o coleta dados pessoais. A an√°lise de IA √© an√¥nima
                e n√£o armazena suas mensagens.</p>
        </div>
    </footer>

    <div id="modal-overlay" class="modal-overlay" onclick="fecharModal()">
        <img id="modal-imagem" src="" alt="Infogr√°fico Resumo Ampliado" class="modal-imagem"
            onclick="event.stopPropagation()">
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const tooltipTitleCallback = (tooltipItems) => {
                const item = tooltipItems[0];
                let label = item.chart.data.labels[item.dataIndex];
                if (Array.isArray(label)) {
                    return label.join(' ');
                } else {
                    return label;
                }
            };

            // Gr√°fico 1: Fatores de Risco (Pizza/Donut)
            const riskCtx = document.getElementById('graficoFatoresRisco');
            if (riskCtx) {
                new Chart(riskCtx.getContext('2d'), {
                    type: 'doughnut',
                    data: {
                        labels: ['Engenharia Social (Press√£o)', 'Falta de Verifica√ß√£o', 'Vazamento de Dados (Foto)', 'Tecnologia (PIX R√°pido)'],
                        datasets: [{
                            label: 'Fatores do Golpe',
                            data: [40, 30, 20, 10],
                            backgroundColor: [
                                '#D9534F', // Vermelho (Press√£o)
                                '#F0AD4E', // Laranja (Falta de Verifica√ß√£o)
                                '#009FFD', // Azul (Vazamento)
                                '#5CB85C'  // Verde (Tecnologia)
                            ],
                            borderColor: '#FFFFFF',
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                            },
                            title: {
                                display: true,
                                text: 'Principais fatores explorados'
                            },
                            tooltip: {
                                callbacks: {
                                    title: tooltipTitleCallback
                                }
                            }
                        }
                    }
                });
            } // Fim do if riskCtx

            // Gr√°fico 2: V√≠timas por Idade (Barras)
            const victimsCtx = document.getElementById('graficoVitimasGolpe');
            if (victimsCtx) {
                new Chart(victimsCtx.getContext('2d'), {
                    type: 'bar',
                    data: {
                        labels: ['18-24', '25-34', '35-44', '45-54', '55-64', '65+'],
                        datasets: [{
                            label: 'V√≠timas de Golpes Financeiros Online (%)',
                            data: [12, 18, 20, 25, 35, 45], // Dados ilustrativos
                            backgroundColor: '#004AAD',
                            borderColor: '#003B8A',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        indexAxis: 'y', // Gr√°fico de barras horizontais
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function (value) {
                                        return value + '%'
                                    }
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            title: {
                                display: true,
                                text: 'Incid√™ncia de V√≠timas por Faixa Et√°ria (Ilustrativo)'
                            },
                            tooltip: {
                                callbacks: {
                                    title: tooltipTitleCallback,
                                    label: function (context) {
                                        return context.dataset.label + ': ' + context.raw + '%';
                                    }
                                }
                            }
                        }
                    }
                });
            } // Fim do if victimsCtx

            // L√≥gica do Guia Interativo
            let currentStep = 1;
            const totalSteps = 5;
            const prevButton = document.getElementById('passo-anterior');
            const nextButton = document.getElementById('proximo-passo');
            const stepTitle = document.getElementById('titulo-passo');
            const titles = [
                "Passo 1: O Alerta",
                "Passo 2: A Press√£o",
                "Passo 3: A Pausa",
                "Passo 4: A Verifica√ß√£o",
                "Passo 5: A Decis√£o Segura"
            ];

            function updateStepView() {
                for (let i = 1; i <= totalSteps; i++) {
                    document.getElementById(`passo-${i}`).classList.remove('active');
                }
                document.getElementById(`passo-${currentStep}`).classList.add('active');
                stepTitle.textContent = titles[currentStep - 1];

                prevButton.disabled = currentStep === 1;
                nextButton.disabled = currentStep === totalSteps;
            }

            if (prevButton && nextButton) {
                prevButton.addEventListener('click', () => {
                    if (currentStep > 1) {
                        currentStep--;
                        updateStepView();
                    }
                });

                nextButton.addEventListener('click', () => {
                    if (currentStep < totalSteps) {
                        currentStep++;
                        updateStepView();
                    }
                });

                updateStepView(); // Inicializa
            } // Fim do if (prevButton && nextButton)

            // L√≥gica da An√°lise de IA (Gemini)
            const analyzeButton = document.getElementById('botao-analisar');
            const messageInput = document.getElementById('campo-mensagem');
            const loader = document.getElementById('carregador');
            const analysisResult = document.getElementById('resultado-analise');
            const resultTitle = document.getElementById('titulo-resultado');
            const resultExplanation = document.getElementById('explicacao-resultado');

            if (analyzeButton) {
                analyzeButton.addEventListener('click', async () => {
                    const message = messageInput.value;
                    if (message.trim().length < 10) {
                        alert("Por favor, insira uma mensagem um pouco mais longa para an√°lise.");
                        return;
                    }

                    // Prepara a UI para a chamada
                    analysisResult.classList.add('hidden');
                    loader.style.display = 'block';
                    analyzeButton.disabled = true;

                    // --- Chamada √† API do Gemini ---
                    // Este √© o prompt do sistema que instrui a IA
                    const systemPrompt = `
                        Voc√™ √© um especialista em seguran√ßa digital focado em fraudes no WhatsApp.
                        Analise a mensagem do usu√°rio e determine o n√≠vel de risco de ser um golpe (Baixo, M√©dio, Alto).
                        Sua resposta deve ser em portugu√™s do Brasil e dividida em duas partes:
                        1.  **T√≠tulo:** Apenas "Risco: [N√≠vel]" (Ex: "Risco: Alto").
                        2.  **Explica√ß√£o:** Um par√°grafo curto (m√°ximo 3 frases) explicando o porqu√™, apontando os gatilhos mentais usados (ex: urg√™ncia, troca de n√∫mero, pedido de PIX).
                        
                        Formate sua resposta exatamente assim:
                        [T√≠tulo]
                        [Explica√ß√£o]
                    `;

                    const userQuery = message;

                    try {
                        // **IN√çCIO DA MODIFICA√á√ÉO DA API KEY**
                        const apiKey = (typeof GEMINI_API_KEY !== 'undefined' && GEMINI_API_KEY !== "") ? GEMINI_API_KEY : "";
                        // **FIM DA MODIFICA√á√ÉO DA API KEY**

                        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

                        if (apiKey === "") {
                            throw new Error("Chave de API n√£o configurada. Verifique o arquivo config.js.");
                        }
                        const payload = {
                            contents: [{ parts: [{ text: userQuery }] }],
                            systemInstruction: {
                                parts: [{ text: systemPrompt }]
                            },
                        };

                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!response.ok) {
                            throw new Error(`Erro na API: ${response.statusText}`);
                        }

                        const result = await response.json();
                        const text = result.candidates[0].content.parts[0].text;

                        // Processa a resposta da IA
                        const parts = text.split('\n');
                        const title = parts[0]; // Primeira linha √© o T√≠tulo
                        const explanation = parts.slice(1).join(' '); // O resto √© a explica√ß√£o

                        resultTitle.textContent = title;
                        resultExplanation.textContent = explanation;

                        // Ajusta a cor do t√≠tulo baseado no risco
                        resultTitle.classList.remove('text-red-600', 'text-yellow-600', 'text-green-600');
                        if (title.includes('Alto')) {
                            resultTitle.classList.add('text-red-600');
                        } else if (title.includes('M√©dio')) {
                            resultTitle.classList.add('text-yellow-600');
                        } else {
                            resultTitle.classList.add('text-green-600');
                        }

                    } catch (error) {
                        console.error("Erro ao chamar a API Gemini:", error);
                        resultTitle.textContent = "Erro na An√°lise";
                        resultExplanation.textContent = "N√£o foi poss√≠vel conectar ao servi√ßo de an√°lise. Por favor, tente novamente mais tarde.";
                        resultTitle.classList.add('text-red-600');
                    } finally {
                        // Restaura a UI
                        loader.style.display = 'none';
                        analysisResult.classList.remove('hidden');
                        analyzeButton.disabled = false;
                    }
                });
            } // Fim do if (analyzeButton)
            const imgInfografico = document.getElementById('img-infografico-resumo');
            const modalOverlay = document.getElementById('modal-overlay');
            const modalImagem = document.getElementById('modal-imagem');

            function abrirModal() {
                const imgSrc = imgInfografico.src;
                modalImagem.src = imgSrc;
                modalOverlay.style.display = 'flex';
            }

            function fecharModal() {
                modalOverlay.style.display = 'none';
                modalImagem.src = ''; // Limpa o src para parar o carregamento
            }

            if (imgInfografico && modalOverlay) {
                imgInfografico.addEventListener('click', abrirModal);
                modalOverlay.addEventListener('click', fecharModal);
            }
        }); // Fim do DOMContentLoaded
    </script>

</body>

</html>